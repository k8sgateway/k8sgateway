---
title: About the gRPC API
weight: 10
description: 
---

The gRPC API in Gloo Edge allows you to expose route incoming 

gRPC is a popular, high-performance framework that is used by many applications. In this guide, we will show you how to expose a gRPC Upstream through a Gloo Edge Virtual Service and connect to it with a gRPC client. Once we have basic connectivity, we will add in TLS connectivity between the gRPC client and the Gloo Edge proxy (Envoy).

## Overview of API changes in the Gloo Edge 1.14 release

Proto descriptors need to be done on the upstream. Descriptors on the gateway are still supported, but are not recommended. 
Virtual service definition used to create the proto descriptors automatically. 

## gRPC transcoding

gRPC transcoding is a feature that you can use to map a gRPC method to one or more HTTP REST endpoints. With gRPC transcoding, you can build one service that supports both gRPC and REST API requests and responses. 

Explain that you can then use curl to route to gRPC apps. 

### HTTP mappings

To map gRPC to HTTP methods, you add an `HttpRule` to your proto file. An `HttpRule` describes how a component of a gRPC request is mapped to an HTTP URL path, URL query parameter, or request body. The `HttpRule` also describes how gRPC response messages are mapped to the HTTP response body. 

To define an `HttpRule` in your proto file, you add the `google.api.http` annotation to your gRPC method as shown in the followimg example. 

{{< highlight yaml "hl_lines=3-4" >}}
     service Messaging {
       rpc GetMessage(GetMessageRequest) returns (Message) {
         option (google.api.http) = {
             get: "/v1/{name=messages/*}"
         };
       }
     }
     message GetMessageRequest {
       string name = 1; // Mapped to URL path.
     }
     message Message {
       string text = 1; // The resource content.
     }
{{< /highlight >}}

With this code, you can achieve the following HTTP to gRPC mapping: 
| HTTP | gRPC |
| -----|-----|
|`curl -X GET http://{DOMAIN_NAME}/v1/messages/123456`  | `GetMessage(name: "messages/123456")`|

To learn more about HTTP to gRPC transcoding and find other examples, see the [Transcoding reference]({{< versioned_link_path fromRoot="/guides/traffic_management/destination_types/grpc/transcoding-reference">}}). 

### Mapping discovery

Adding HTTP mappings to your proto files does not automatically set up Gloo Edge to route HTTP requests to your gRPC app. To configure your Gloo Edge proxy to accept incoming HTTP requests for your gRPC app and to correctly translate the HTTP request into a gRPC request, the gateway requires proto descriptors to be present on the gRPC upstream. Proto descriptors are generated by using the `protoc` tool based on what you defined in your proto files and must be encoded to base64 before they are added to the gRPC upstream. 

Depending on your setup, Gloo Edge provides the following options to discover the proto descriptors: 

- **Automatic discovery with FDS**: You can enable the Gloo Edge Function Discovery Service (FDS) to automatically discover proto descriptors in your gRPC service and to add them to the upstream. 
- **Manual**: If you do not or cannot enable Gloo Edge FDS, you can manually generate proto descriptors, encode them, and add them to the upstream. Note that proto descriptors are overwritten when you enable FDS. 

After the proto descriptor binary is discovered, Gloo Edge can accept incoming HTTP requests and translate these requests to gRPC requests so that they can be processed by the gRPC upstream. 
 
### Transcoding process

The following image shows the general steps that you have to take to enable gRPC transcoding on your upstream. 

<figure><img src="{{< versioned_link_path fromRoot="/img/grpc-transcoding.svg">}}">
<figcaption style="text-align:center;font-style:italic">Enable gRPC transcoding on an upstream</figcaption></figure>
 

 






