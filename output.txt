GOLANG_PROTOBUF_REGISTRATION_CONFLICT=ignore ACK_GINKGO_RC=true ACK_GINKGO_DEPRECATIONS=v2.17.0 /Users/samheilbron/go/src/github.com/solo-io/gloo/_output/.bin/ginkgo -ldflags="-X github.com/solo-io/gloo/pkg/version.Version=1.0.1-dev" \
	-tags=purego --trace -progress -race --fail-fast -fail-on-pending --randomize-all --compilers=5 --json-report=test-report.json --junit-report=junit.xml -output-dir=/Users/samheilbron/go/src/github.com/solo-io/gloo/_output  \
	projects/gloo/pkg/servers/iosnapshot/
Running Suite: IOSnapshot Suite - /Users/samheilbron/go/src/github.com/solo-io/gloo/projects/gloo/pkg/servers/iosnapshot
========================================================================================================================
Random Seed: [1m1722359630[0m - will randomize all specs

Will run [1m1[0m of [1m39[0m specs
[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m
[38;5;243m------------------------------[0m
[38;5;9mâ€¢ [FAILED] [0.018 seconds][0m
[0mHistory [38;5;243mGetInputSnapshot [0mwhen Kubernetes Gateway integration is enabled [38;5;9m[1m[It] Includes ConfigMaps[0m
[38;5;243m/Users/samheilbron/go/src/github.com/solo-io/gloo/projects/gloo/pkg/servers/iosnapshot/history_test.go:978[0m

  [38;5;9m[FAILED] results should contain /v1, Kind=Secret configmap.kube-configmap
  Expected
      <[]v1.Resource | len:3, cap:4>: [
          {
              TypeMeta: {
                  Kind: "Gateway",
                  APIVersion: "gateway.networking.k8s.io/v1",
              },
              ObjectMeta: {
                  Name: "gw-client-signal",
                  GenerateName: "",
                  Namespace: "gloo-system",
                  SelfLink: "",
                  UID: "",
                  ResourceVersion: "999",
                  Generation: 0,
                  CreationTimestamp: {
                      Time: 0001-01-01T00:00:00Z,
                  },
                  DeletionTimestamp: nil,
                  DeletionGracePeriodSeconds: nil,
                  Labels: nil,
                  Annotations: nil,
                  OwnerReferences: nil,
                  Finalizers: nil,
                  ManagedFields: nil,
              },
              Status: {},
              Spec: {
                  "gatewayClassName": <string>"",
                  "listeners": nil,
              },
          },
          {
              TypeMeta: {
                  Kind: "Settings",
                  APIVersion: "gloo.solo.io/v1",
              },
              ObjectMeta: {
                  Name: "my-settings",
                  GenerateName: "",
                  Namespace: "gloo-system",
                  SelfLink: "",
                  UID: "",
                  ResourceVersion: "",
                  Generation: 0,
                  CreationTimestamp: {
                      Time: 0001-01-01T00:00:00Z,
                  },
                  DeletionTimestamp: nil,
                  DeletionGracePeriodSeconds: nil,
                  Labels: nil,
                  Annotations: nil,
                  OwnerReferences: nil,
                  Finalizers: nil,
                  ManagedFields: nil,
              },
              Status: {},
              Spec: {},
          },
          {
              TypeMeta: {Kind: "ConfigMap", APIVersion: "v1"},
              ObjectMeta: {
                  Name: "kube-configmap",
                  GenerateName: "",
                  Namespace: "configmap",
                  SelfLink: "",
                  UID: "",
                  ResourceVersion: "999",
                  Generation: 0,
                  CreationTimestamp: {
                      Time: 0001-01-01T00:00:00Z,
                  },
                  DeletionTimestamp: nil,
                  DeletionGracePeriodSeconds: nil,
                  Labels: nil,
                  Annotations: nil,
                  OwnerReferences: nil,
                  Finalizers: nil,
                  ManagedFields: nil,
              },
              Status: nil,
              Spec: nil,
          },
      ]
  to contain element matching
      <*gstruct.FieldsMatcher | 0xc000c74c30>: {
          Fields: {
              "Spec": <*gstruct.PointerMatcher | 0xc0007c1500>{
                  Matcher: <*matchers.HaveKeyWithValueMatcher | 0xc0007c14e0>{
                      Key: <string>"data",
                      Value: <*matchers.AndMatcher | 0xc000c74bd0>{
                          Matchers: [
                              <*matchers.HaveKeyWithValueMatcher | 0xc0007c14c0>{
                                  Key: <string>"key",
                                  Value: <string>"value",
                              },
                          ],
                          firstFailedMatcher: nil,
                      },
                  },
                  failure: "Expected\n    <*v1.Spec | 0x0>: nil\nnot to be <nil>",
              },
              "TypeMeta": <*gstruct.FieldsMatcher | 0xc000c74ab0>{
                  Fields: {
                      "APIVersion": <*matchers.EqualMatcher | 0xc000c6efc0>{
                          Expected: <string>"v1",
                      },
                      "Kind": <*matchers.EqualMatcher | 0xc000c6efe0>{
                          Expected: <string>"ConfigMap",
                      },
                  },
                  IgnoreExtras: true,
                  IgnoreMissing: false,
                  failures: nil,
              },
              "ObjectMeta": <*matchers.AndMatcher | 0xc000c74ba0>{
                  Matchers: [
                      <*gstruct.FieldsMatcher | 0xc000c74b10>{
                          Fields: {
                              "ManagedFields": <*matchers.BeNilMatcher | 0x1063c7e00>{},
                          },
                          IgnoreExtras: true,
                          IgnoreMissing: false,
                          failures: nil,
                      },
                      <*gstruct.FieldsMatcher | 0xc000c74b70>{
                          Fields: {
                              "Name": <*matchers.EqualMatcher | 0xc000c6f010>{
                                  Expected: <string>"kube-configmap",
                              },
                              "Namespace": <*matchers.EqualMatcher | 0xc000c6f030>{
                                  Expected: <string>"configmap",
                              },
                          },
                          IgnoreExtras: true,
                          IgnoreMissing: false,
                          failures: nil,
                      },
                  ],
                  firstFailedMatcher: nil,
              },
          },
          IgnoreExtras: true,
          IgnoreMissing: false,
          failures: [
              <*errors.NestedError | 0xc0007c1940>{
                  Path: ".Spec",
                  Err: <*errors.errorString | 0xc000c80410>{
                      s: "Expected\n    <*v1.Spec | 0x0>: nil\nnot to be <nil>",
                  },
              },
          ],
      }[0m
  [38;5;9mIn [1m[It][0m[38;5;9m at: [1m/Users/samheilbron/go/src/github.com/solo-io/gloo/projects/gloo/pkg/servers/iosnapshot/history_test.go:994[0m [38;5;243m@ 07/30/24 11:13:55.888[0m

  [38;5;9mFull Stack Trace[0m
    github.com/solo-io/gloo/projects/gloo/pkg/servers/iosnapshot.init.func2.3.18.13()
    	/Users/samheilbron/go/src/github.com/solo-io/gloo/projects/gloo/pkg/servers/iosnapshot/history_test.go:994 +0x1134
[38;5;243m------------------------------[0m
[38;5;14mS[0m[38;5;14mS[0m[38;5;14mS[0m

[38;5;9m[1mSummarizing 1 Failure:[0m
  [38;5;9m[FAIL][0m [0mHistory [38;5;243mGetInputSnapshot [0mwhen Kubernetes Gateway integration is enabled [38;5;9m[1m[It] Includes ConfigMaps[0m
  [38;5;243m/Users/samheilbron/go/src/github.com/solo-io/gloo/projects/gloo/pkg/servers/iosnapshot/history_test.go:994[0m

[38;5;9m[1mRan 1 of 39 Specs in 0.021 seconds[0m
[38;5;9m[1mFAIL![0m -- [38;5;10m[1m0 Passed[0m | [38;5;9m[1m1 Failed[0m | [38;5;11m[1m0 Pending[0m | [38;5;14m[1m38 Skipped[0m
--- FAIL: TestIoSnapshot (0.04s)
FAIL

Ginkgo ran 1 suite in 4.93051675s

Test Suite Failed
