changelog:
  - type: NEW_FEATURE
    resolvesIssue: false
    issueLink: https://github.com/solo-io/gloo/issues/7791
    description: >-
      Populate the `service_name` field in the [OpenTelemetry Config](https://www.envoyproxy.io/docs/envoy/latest/api-v3/config/trace/v3/opentelemetry.proto.html).
      The gateway name is taken from the `MetadataStatic` data in the parent [Listener](https://docs.solo.io/gloo-edge/latest/reference/api/github.com/solo-io/gloo/projects/gloo/api/v1/proxy.proto.sk/#listener),
      Specifically, the `resourceRef.name` field of the [SourceRef](https://docs.solo.io/gloo-edge/latest/reference/api/github.com/solo-io/gloo/projects/gloo/api/v1/proxy.proto.sk/#sourceref) with
      a `resourceKind` of `*v1.Gateway` is used to set the `service_name`.

      If the metadata is not present, or in a different format, the `service_name` will be set to th following:
      <TODO> - error cases

      Breaking change: the `ToEnvoyOpenTelemetryonfiguration` function in "github.com/solo-io/gloo/projects/gloo/pkg/api/v1/options/tracing" has
      been removed and replaced with `ToEnvoyOpenTelemetryConfiguration`, which takes an additional `serviceName` string parameter.